<!DOCTYPE html>

<html lang="fr">
<head>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Formulaire de Commande - SenSales Boutique</title>
<link href="style.css" rel="stylesheet"/>
<style>
    body {
      font-family: Arial, sans-serif;
      padding: 2rem;
      background-color: #f9f9f9;
    }
    .form-container {
      background: white;
      max-width: 500px;
      margin: auto;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    form {
      display: flex;
      flex-direction: column;
    }
    label {
      margin-top: 1rem;
      margin-bottom: 0.3rem;
    }
    input, select {
      padding: 0.6rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .btn-submit {
      margin-top: 2rem;
      padding: 0.8rem;
      background-color: #27ae60;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
    }
    .btn-submit:hover {
      background-color: #219150;
    }
  </style>
</head>
<body>
<div class="form-container">
<h1>Formulaire de Commande</h1>
<p><strong id='product-name'></strong></p>

<form id="orderForm">
<input id="product" readonly="" required="" type="hidden"/>
<input id="price" readonly="" required="" type="hidden"/>

<label for="firstname">Prénom</label>
<input id="firstname" required="" type="text"/>

<label for="lastname">Nom</label>
<input id="lastname" required="" type="text"/>

<label for="town">Ville de livraison</label>
<input id="town" required="" type="text"/>



<label for="quantity">Quantité</label>
<input id="quantity" min="1" required="" type="number" value="1" onchange='updateTotal()'/>



<label for="phone">Numéro de téléphone</label>
<input id="phone" placeholder="+221..." required="" type="tel"/>

<br>
<p>Total : <strong id='total'></strong></p>

<button class="btn-submit" type="submit">Commander sur WhatsApp</button>

</form>
</div>
<script>
    const urlParams = new URLSearchParams(window.location.search);

    const product = urlParams.get('product');
    document.getElementById('product').value = product || "";
 
    document.getElementById('product-name').textContent = product || "";
 
  
    const price = urlParams.get('price');
    document.getElementById('price').value = price + ' FCFA';



    document.getElementById('orderForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const quantity = document.getElementById('quantity').value;
      const firstname = document.getElementById('firstname').value;
      const lastname = document.getElementById('lastname').value;
      const town = document.getElementById('town').value;
      const phone = document.getElementById('phone').value;

      const message = `Bonjour, je souhaite commander :\nProduit : ${product}\nQuantité : ${quantity}\nNom : ${lastname} ${firstname}\nTéléphone : ${phone}\nMerci de me livrer à \nl'emplacement : ${town}.`;
      const encodedMessage = encodeURIComponent(message);
      const whatsappNumber = '221710423866';
      window.open(`https://wa.me/${whatsappNumber}?text=${encodedMessage}`, '_blank');
    });


function getParam(param) {
  const url = new URLSearchParams(window.location.search);
  return url.get(param);
}
function updateTotal() {
  const price = parseInt(getParam('price'));
  const qty = parseInt(document.getElementById('quantity').value) || 0;
  const total = price * qty;
  document.getElementById('total').textContent = total.toLocaleString() + ' FCFA';
}
window.onload = function() {
  updateTotal();
};

</script></body>
</html>
